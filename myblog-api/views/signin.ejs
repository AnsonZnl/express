<%- include('header') %>

<div class="ui grid">
    <div class="four wide column"></div>
    <div class="eight wide column">
        <form class="ui form segment" method="post">
            <div class="field required">
                <label>用户名</label>
                <input id="name" placeholder="用户名" type="text" name="name">
            </div>
            <div class="field required">
                <label>密码</label>
                <input id="password" placeholder="密码" type="password" name="password">
            </div>
            <input id="submit" type="text" class="ui button fluid" value="登录">
        </form>
    </div>
</div>

<%- include('footer') %>
<script>
    $(function () {
        $("#submit").on('click', function () {
            var name = $('#name').val()
            var password = $('#password').val()
            if (name && password) {
                $.ajax({
                    url: 'http://localhost:3000/signin',
                    type: 'post',
                    data: {name: name, password: password},
                    success: function (r) {
                        console.log(3, r)
                        if (r.status == 200) {
                            location.href = '/blog'
                        }else{
                            //用户名或密码错误
                            alert(r.message)
                        }
                    }
                })
            } else {
                alert('用户名或密码不能为空')
            }
        })
    })
</script>
